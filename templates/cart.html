{% extends "base.html" %}
{% block title %}Your Cart{% endblock %}
{% block content %}
<div class="container my-4">
  <h2>Your Cart</h2>

  {% with messages = get_flashed_messages() %}
  {% if messages %}
  <div class="alert alert-success">
    {{ messages[0] }}
  </div>
  {% endif %}
  {% endwith %}

  {% if cart_items %}
  <table class="table table-bordered mt-3">
    <thead>
      <tr>
        <th>Product</th>
        <th>Unit Price</th>
        <th>Quantity</th>
        <th>Total Price</th>
      </tr>
    </thead>
    <tbody>
      {% for item in cart_items %}
      <tr>
        <td>{{ item.product_name }}</td>
        <td>${{ "%.2f"|format(item.price) }}</td>
        <td>{{ item.quantity }}</td>
        <td>${{ "%.2f"|format(item.subtotal) }}</td>
      </tr>
      {% endfor %}
    </tbody>
    <tfoot>
      <tr>
        <th colspan="3" class="text-end">Total</th>
        <th>${{ "%.2f"|format(total_price) }}</th>
      </tr>
    </tfoot>
  </table>
<!-- your existing cart.html -->
<a href="{{ url_for('order_page') }}" class="btn btn-primary me-2">Place Order</a>

  {% else %}
  <p>Your cart is empty. <a href="{{ url_for('dashboard_page') }}">Browse products</a></p>
  {% endif %}
</div>
{% endblock %}
